<?xml version="1.0" encoding="UTF-8" ?> <!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="zhang.mapper.UserMapper">
    <!-- 开启二级缓存 -->
    <cache type="org.mybatis.caches.ehcache.EhcacheCache"/>

    <resultMap type="zhang.pojo.User" id="userBaseMap">
        <!-- column:数据库表中字段名   property:pojo字段名-->
        <id column="id" property="id"/>
        <result column="user_name" property="userName"/>
        <result column="user_sex" property="userSex"/>
        <result column="user_age" property="userAge"/>
        <result column="user_tel" property="userTel"/>
    </resultMap>

    <resultMap type="zhang.pojo.User" id="userOrderMap">
        <id column="id" property="id"/>
        <result column="user_name" property="userName"/>
        <result column="user_sex" property="userSex"/>
        <result column="user_age" property="userAge"/>
        <result column="user_tel" property="userTel"/>

        <!-- 一对多级联映射: collection-->
        <collection property="listOrders" ofType="zhang.pojo.Order">
            <!--这里不要使用<id/> 否则只会显示一条-->
            <result column="id" property="id"/>
            <result column="user_id" property="userId"/>
            <result column="pro_id" property="proId"/>
            <result column="or_num" property="orNum"/>
            <result column="totalprice" property="totalPrice"/>
        </collection>
    </resultMap>
    <select id="selectUserById" parameterType="java.lang.Integer" resultMap="userOrderMap">
		SELECT u.*,o.* FROM user_info u,order_info o WHERE u.id=o.user_id AND u.id=#{id}
	</select>

</mapper>